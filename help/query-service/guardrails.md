---
keywords: Experience Platform；查詢；查詢服務；疑難排解；護欄；指引；限制；
title: 查詢服務的護欄
description: 本檔案提供查詢服務資料的使用量限制資訊，以協助您最佳化查詢使用。
exl-id: 1ad5dcf4-d048-49ff-97e3-07040392b65b
source-git-commit: 5ceb261dbf1cac58d0cfe620875b8fa7c761abf2
workflow-type: tm+mt
source-wordcount: '1004'
ht-degree: 1%

---

# 查詢服務的護欄

護欄是引導資料和系統使用、效能最佳化，以及避免Adobe Experience Platform中錯誤或意外結果的臨界值。

本檔案提供查詢服務資料的預設使用量限制，以協助您在查詢與授權權益相關的資料時最佳化系統效能。

## 先決條件

在繼續閱讀本檔案之前，您應該對查詢服務的定義和功能有深入的瞭解。 其說明如下：

* **臨時查詢**：用於執行 `SELECT` 查詢，以探索、實驗及驗證查詢結果的資料 **未儲存** 在資料湖上。

* **批次查詢**：用於執行 `INSERT TABLE AS SELECT` 和 `CREATE TABLE AS SELECT` 以清除、塑形、操控及擴充資料的查詢。 這些查詢的結果 **已儲存** 在資料湖上。 測量此功能耗用的量度是計算時數。

* **查詢服務使用者**：在您目前的Customer Journey Analytics、Adobe Real-time Customer Data Platform及/或Adobe Journey Optimizer授權內提供的查詢服務使用者，也可以搭配Data Distiller使用。 查詢服務使用者在功能之間共用。

* **臨時使用者**：臨時使用者是執行臨時查詢的使用者。

* **批次使用者**：批次使用者為執行批次查詢的使用者。

* **報告API**：用於進行資料擷取呼叫的API （內部或外部）。 延伸報表資料模型衍生自Adobe Experience Platform中的原生報表資料模型，例如Real-Time CDP儀表板資料模型。

下圖概述查詢服務功能目前封裝和授權的方式：

## 限制型別

本檔案有兩種預設限制：

* **軟性限制**：您可以超出軟性限制，但軟性限制會提供系統效能的建議指引。

* **硬限制**：硬限制提供絕對最大值。

>[!NOTE]
>
>本檔案中概述的預設限制正在不斷改進。 請定期回來檢視更新。

## 主要實體效能護欄

下表提供在使用特定查詢模式時執行查詢的建議護欄限制和說明。

**臨時查詢**

| 護欄 | 限制 | 限制型別 | 說明 |
|---|---|---|---|
| 最長執行時間 | 10 分鐘 | 硬 | 這會定義臨機SQL查詢的最大輸出時間。 超過傳回結果的時間限制會擲回錯誤碼53400。 |
| 並行查詢服務使用者 | <ul><li>如應用程式產品說明中所指定。</li><li>+5 （使用者額外購買的Ad Hoc Query附加套件數量不限）</li></ul> | 硬 | 這會定義有多少使用者可同時為特定組織建立工作階段。 如果超過並行限制，使用者會收到 `Session Limit Reached` 錯誤。 |
| 查詢並行 | <ul><li>如應用程式產品說明中所指定。</li><li>+1 （每購買一個額外的Ad Hoc Query使用者附加SKU套件）</li></ul> | 硬 | 這會定義特定組織可同時執行多少個查詢。 如果超過並行限制，則會將查詢排入佇列。 |
| 使用者端聯結器和結果輸出限制 | 使用者端聯結器<ul><li>查詢UI （100列）</li><li>協力廠商使用者端(50,000)</li><li>[!DNL PostgresSQL] 使用者端(50,000)</li></ul> | 硬 | 可透過下列方式接收查詢結果：<ul><li>查詢服務UI</li><li>第三方使用者端</li><li>[!DNL PostgresSQL] 使用者端</li></ul>注意：對輸出計數新增限制可能會更快地傳回結果。 例如， `LIMIT 5`， `LIMIT 10`、等等。 |
| 傳回的結果透過 | 使用者端UI | 不適用 | 這會定義如何將結果提供給使用者。 |

{style="table-layout:auto"}

**批次查詢**

| **護欄** | **限制** | **限制型別** | **說明** |
|---|---|---|---|
| 最長執行時間 | 24 小時 | 硬 | 這會定義批次SQL查詢的最大執行時間。<br>查詢的處理時間取決於要處理的資料量和查詢複雜性。 |
| 未排定批次的並行查詢服務使用者 | <ul><li>如應用程式產品說明中所指定。</li><li>+5 （使用者額外購買的Ad Hoc Query附加套件數量不限）</li></ul> | 硬 | 對於未排程的批次查詢（例如，互動模式的CTAS/ITAS查詢），這會定義有多少使用者可以為特定組織同時建立工作階段。 如果超過並行限制，使用者會收到 `Session Limit Reached` 錯誤。 |
| 排定批次的並行查詢服務使用者 | 無使用者限制 | 不適用 | 排定的批次查詢為非同步作業，因此沒有使用者限制。 |
| 批次資料處理的運算時數 | 如客戶的Adobe Experience Platform智慧查詢自訂SKU銷售訂單中所指定 | 柔和 | 這定義了客戶每年可執行批次查詢以掃描、處理資料以及將資料寫回資料湖的運算時間範圍。 |
| 查詢並行 | 支援 | 不適用 | 排定的批次查詢為非同步作業，因此支援並行查詢。 |
| 使用者端聯結器和結果輸出限制 | 使用者端聯結器<ul><li>查詢UI （沒有列數上限）</li><li>協力廠商使用者端（列數沒有上限）</li><li>[!DNL PostgresSQL] 使用者端（列數沒有上限）</li><li>REST API （列數沒有上限）</li></ul> | 硬 | 可使用下列方法取得查詢結果：<ul><li>可儲存為衍生資料集</li><li>可以插入現有的衍生資料集中</li></ul>備註：查詢結果的記錄計數沒有上限。 |
| 傳回的結果透過 | 資料集 | 不適用 | 這會定義如何將結果提供給使用者。 |

{style="table-layout:auto"}

## 查詢加速存放區 {#query-accelerated-store}

下表提供查詢加速存放區的建議護欄限制和說明。

| 護欄 | 限制 | 限制型別 | 說明 |
|---|---|---|---|
| 查詢並行 | 4 | 硬 | 為確保透過報表API對彙總資料進行的查詢(包括增強Real-Time CDP資料模型等資料模型的查詢)擁有有效執行的資源，報表API會透過為每個查詢指派並行位置來追蹤資源使用率。 系統會將查詢放入佇列並等待併發位置可用或從快取中提供它們。 在任何指定時間，最多可同時使用四個查詢位置。<br>如果您透過BI工具存取報表API且需要更多並行存取，則需要BI伺服器。 |

{style="table-layout:auto"}

## 後續步驟

閱讀本檔案後，您應該更瞭解使用可用查詢模式執行查詢的預設限制。

請參閱下列檔案，瞭解查詢服務的詳細資訊：

* [查詢服務API](./api/getting-started.md)
* [查詢服務UI](./ui/overview.md)

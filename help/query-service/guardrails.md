---
keywords: Experience Platform；查詢；查詢服務；疑難排解；護欄；准則；限制；
title: 查詢服務的護欄
description: 本文檔提供有關查詢服務資料使用限制的資訊，以幫助您優化查詢使用。
exl-id: 1ad5dcf4-d048-49ff-97e3-07040392b65b
source-git-commit: e40a9fb0149e194de693a98e5d185860a255b5c4
workflow-type: tm+mt
source-wordcount: '1029'
ht-degree: 2%

---

# 查詢服務的護欄

護欄是指引資料和系統使用、效能最佳化，以及避免Adobe Experience Platform中發生錯誤或意外結果的臨界值。

本文檔提供查詢服務資料的預設使用限制，以幫助您在查詢與授權權限相關的資料時優化系統效能。

## 先決條件

在繼續閱讀本檔案之前，您應已妥善了解關鍵查詢服務的定義和功能。 說明如下：

* **臨機查詢**:用於執行 `SELECT` 查詢，以探索、實驗和驗證查詢結果所在的資料 **未儲存** 資料湖。

* **批次查詢**:用於執行 `INSERT TABLE AS SELECT` 和 `CREATE TABLE AS SELECT` 清除、塑造、操控和擴充資料的查詢。 這些查詢的結果 **儲存** 資料湖。 用於測量此功能耗用量的量度是計算小時數。

* **查詢服務用戶**:在您目前的Customer Journey Analytics、Adobe Real-time Customer Data Platform和/或Adobe Journey Optimizer授權內提供的Query Service使用者，也可與Data Distiller搭配使用。 查詢服務用戶在功能之間共用。

* **臨機使用者**:臨機使用者是執行臨機查詢的使用者。

* **批次使用者**:批處理用戶是執行批處理查詢的用戶。

* **報表API**:用於進行資料擷取呼叫（內部或外部）的API。 延伸報表資料模型衍生自Adobe Experience Platform中的原生報表資料模型，例如Real-Time CDP控制面板資料模型。

下圖概括了Query Service功能當前的打包和許可方式：

![說明與授權相關的Query Service功能的分發和封裝的圖表。](./images/guardrails/query-capabilities.png)

## 限制類型

本文檔中有兩種預設限制類型：

* **軟限制**:但是，軟限制可以超出軟限制，為系統效能提供建議的准則。

* **硬限制**:硬限制提供絕對最大值。

>[!NOTE]
>
>本檔案中概述的預設限制不斷改善。 請定期回來查看更新。

## 主實體效能護欄

下表提供使用特定查詢模式時用於查詢執行的建議護欄限制和說明。

**臨機查詢**

| 瓜德拉伊 | 限制 | 限制類型 | 說明 |
|---|---|---|---|
| 最大執行時間 | 10 分鐘 | 硬 | 這定義了臨機SQL查詢的最大輸出時間。 超過傳回結果的時間限制會擲回錯誤代碼53400。 |
| 併發查詢服務用戶 | <ul><li>如應用程式產品說明中所指定。</li><li>+5（每購買一個附加的Ad Hoc Query Users附加包）</li></ul> | 硬 | 這會定義可同時為特定組織建立工作階段的使用者人數。 如果超過併發限制，則用戶會收到 `Session Limit Reached` 錯誤。 |
| 查詢併發 | <ul><li>如應用程式產品說明中所指定。</li><li>+1（每購買一個額外的Ad Hoc查詢使用者附加SKU套件）</li></ul> | 硬 | 這會定義可為特定組織同時執行的查詢數。 如果超出併發限制，則將排入隊列。 |
| 客戶端連接器和結果輸出限制 | 用戶端連接器<ul><li>查詢UI（100列）</li><li>第三方客戶端(50,000)</li><li>[!DNL PostgresSQL] 客戶端(50,000)</li></ul> | 硬 | 查詢結果可通過以下方式接收：<ul><li>查詢服務UI</li><li>第三方用戶端</li><li>[!DNL PostgresSQL] 客戶</li></ul>注意：對輸出計數加上限制可能會更快傳回結果。 例如， `LIMIT 5`, `LIMIT 10`等。 |
| 透過 | 用戶端UI | 不適用 | 這會定義如何讓使用者取得結果。 |

{style=&quot;table-layout:auto&quot;}

**批次查詢**

| **瓜德拉伊** | **限制** | **限制類型** | **說明** |
|---|---|---|---|
| 最大執行時間 | 24 小時 | 硬 | 這定義了批處理SQL查詢的最大執行時間。<br>查詢的處理時間取決於要處理的資料量和查詢複雜度。 |
| 未計畫批的併發查詢服務用戶 | <ul><li>如應用程式產品說明中所指定。</li><li>+5（每購買一個附加的Ad Hoc Query Users附加包）</li></ul> | 硬 | 對於未計畫批處理查詢（例如，交互模式下的CTAS/ITAS查詢），它定義了可以為特定組織同時建立會話的用戶數。 如果超過併發限制，則用戶會收到 `Session Limit Reached` 錯誤。 |
| 計畫批的併發查詢服務用戶 | 無用戶限制 | 不適用 | 排程的批次查詢為非同步作業，因此沒有使用者限制。 |
| 批處理資料的計算小時數 | 如客戶的Adobe Experience Platform Intelligence Query Custom SKU銷售訂單中所指定 | 軟 | 這定義了允許客戶執行批次查詢以掃描、處理和將資料寫回資料湖的計算時間範圍。 |
| 查詢併發 | 支援 | 不適用 | 排程的批次查詢為非同步作業，因此支援同時查詢。 |
| 客戶端連接器和結果輸出限制 | 用戶端連接器<ul><li>查詢UI（沒有列上限）</li><li>第三方用戶端（無列上限）</li><li>[!DNL PostgresSQL] 用戶端（沒有列上限）</li><li>REST API（無列上限）</li></ul> | 硬 | 查詢的結果可使用下列方法：<ul><li>可儲存為衍生資料集</li><li>可插入現有的衍生資料集</li></ul>注意：查詢結果中的記錄計數編號沒有上限。 |
| 透過 | 資料集 | 不適用 | 這會定義如何讓使用者取得結果。 |

{style=&quot;table-layout:auto&quot;}

## 查詢加速儲存 {#query-accelerated-store}

下表提供查詢加速儲存的建議護欄限制和說明。

| 瓜德拉伊 | 限制 | 限制類型 | 說明 |
|---|---|---|---|
| 查詢併發 | 4 | 硬 | 為確保透過報告API對匯總資料的查詢(包括增強資料模型（例如即時CDP資料模型）有資源可有效執行，報告API會為每個查詢指派併發槽來追蹤資源利用率。 系統會將查詢放入佇列中，並等待併發槽可用或可從快取提供。 任何指定時間最多可使用四個同時查詢槽。<br>如果您透過BI工具存取報表API，且需要更多並行，則需要BI伺服器。 |

{style=&quot;table-layout:auto&quot;}

## 後續步驟

閱讀本檔案後，您應更清楚了解可用查詢模式的查詢執行預設限制。

如需Query Service的詳細資訊，請參閱下列檔案：

* [查詢服務API](./api/getting-started.md)
* [查詢服務UI](./ui/overview.md)

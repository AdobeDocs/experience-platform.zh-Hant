---
keywords: Experience Platform；查詢；查詢；服務；疑難解答；guardrails;guilenses;limit;
title: 查詢服務的護欄
description: 本文檔提供有關查詢服務資料的使用限制的資訊，以幫助您優化查詢使用。
exl-id: 1ad5dcf4-d048-49ff-97e3-07040392b65b
source-git-commit: 5ceb261dbf1cac58d0cfe620875b8fa7c761abf2
workflow-type: tm+mt
source-wordcount: '1004'
ht-degree: 1%

---

# 查詢服務的護欄

護欄是指導資料和系統使用、效能優化和避免錯誤或意外結果在Adobe Experience Platform的閾值。

此文檔提供查詢服務資料的預設使用限制，以幫助您在查詢與授權相關的資料時優化系統效能。

## 先決條件

在繼續本文檔之前，您應充分瞭解關鍵查詢服務定義和功能。 下面介紹了這些內容：

* **即席查詢**:用於執行 `SELECT` 查詢以在查詢結果的位置瀏覽、實驗和驗證資料 **未儲存** 在資料湖上。

* **批處理查詢**:用於執行 `INSERT TABLE AS SELECT` 和 `CREATE TABLE AS SELECT` 查詢以清理、形狀、操作和豐富資料。 這些查詢的結果 **儲存** 在資料湖上。 用於測量此功能消耗的度量是計算小時數。

* **查詢服務用戶**:您當前許可證中為Customer Journey Analytics、Adobe Real-time Customer Data Platform和/或Adobe Journey Optimizer提供的查詢服務用戶也可以與資料Distiller一起使用。 查詢服務用戶在功能之間共用。

* **即席用戶**:即席用戶是執行即席查詢的用戶。

* **批用戶**:批用戶是執行批查詢的用戶。

* **報告API**:用於進行資料提取調用（內部或外部）的API。 擴展報告資料模型是從Adobe Experience Platform的本機報告資料模型(如Real-Time CDP儀表板資料模型)中派生的。

下圖概述了查詢服務功能當前打包和許可的方式：

## 限制類型

本文檔中有兩種預設限制類型：

* **軟限制**:您可以超出軟限制，但是軟限制提供了系統效能的建議准則。

* **硬限制**:硬限制提供絕對最大值。

>[!NOTE]
>
>本文檔中概述的預設限制正在不斷改進。 請定期回頭查看更新。

## 主要實體效能護欄

下表提供了在使用特定查詢模式時用於查詢執行的建議的防範限制和說明。

**即席查詢**

| 瓜德賴爾 | 限制 | 限制類型 | 說明 |
|---|---|---|---|
| 最大執行時間 | 10 分鐘 | 硬 | 這定義了即席SQL查詢的最大輸出時間。 超過返回結果的時間限制會引發錯誤代碼53400。 |
| 併發查詢服務用戶 | <ul><li>如應用程式產品說明中所指定。</li><li>+5（每購買額外的Ad hoc查詢用戶附加包）</li></ul> | 硬 | 這定義了可以為特定組織同時建立會話的用戶數。 如果超過併發限制，則用戶接收 `Session Limit Reached` 錯誤。 |
| 查詢併發 | <ul><li>如應用程式產品說明中所指定。</li><li>+1（每購買額外的Ad hoc查詢用戶附加SKU包）</li></ul> | 硬 | 這定義了可為特定組織同時執行的查詢數。 如果超出併發限制，則查詢將排隊。 |
| 客戶端連接器和結果輸出限制 | 客戶端連接器<ul><li>查詢UI（100行）</li><li>第三方客戶端(50,000)</li><li>[!DNL PostgresSQL] 客戶端(50,000)</li></ul> | 硬 | 查詢結果可以通過以下方式接收：<ul><li>查詢服務UI</li><li>第三方客戶</li><li>[!DNL PostgresSQL] 客戶端</li></ul>注：對輸出計數添加限制可以更快地返回結果。 比如說， `LIMIT 5`。 `LIMIT 10`等等。 |
| 返回的結果 | 客戶端UI | 不適用 | 這定義了如何將結果提供給用戶。 |

{style="table-layout:auto"}

**批處理查詢**

| **瓜德賴爾** | **限制** | **限制類型** | **說明** |
|---|---|---|---|
| 最大執行時間 | 24 小時 | 硬 | 這定義了批處理SQL查詢的最大執行時間。<br>查詢的處理時間取決於要處理的資料量和查詢複雜性。 |
| 未計畫批的併發查詢服務用戶 | <ul><li>如應用程式產品說明中所指定。</li><li>+5（每購買額外的Ad hoc查詢用戶附加包）</li></ul> | 硬 | 對於未計畫的批處理查詢（例如，在交互模式下的CTAS/ITAS查詢），它定義了可以為特定組織同時建立會話的用戶數。 如果超過併發限制，則用戶接收 `Session Limit Reached` 錯誤。 |
| 計畫批的併發查詢服務用戶 | 無用戶限制 | 不適用 | 計畫的批處理查詢是非同步作業，因此沒有用戶限制。 |
| 批處理資料的計算時數 | 如客戶的Adobe Experience Platform智慧查詢自定義SKU銷售訂單中指定 | 軟 | 這定義了允許客戶執行批處理查詢以掃描、處理和將資料寫回資料湖的每年規定範圍的計算時間量。 |
| 查詢併發 | 支援 | 不適用 | 計畫批處理查詢是非同步作業，因此支援併發查詢。 |
| 客戶端連接器和結果輸出限制 | 客戶端連接器<ul><li>查詢UI（沒有行上限）</li><li>第三方客戶端（沒有行上限）</li><li>[!DNL PostgresSQL] 客戶端（沒有行上限）</li><li>REST API（沒有行上限）</li></ul> | 硬 | 可以使用以下方法使查詢結果可用：<ul><li>可以儲存為派生資料集</li><li>可以插入到現有的派生資料集</li></ul>注：查詢結果中的記錄計數編號沒有上限。 |
| 返回的結果 | 資料集 | 不適用 | 這定義了如何將結果提供給用戶。 |

{style="table-layout:auto"}

## 查詢加速儲存 {#query-accelerated-store}

下表提供了查詢加速儲存的建議保護限制和說明。

| 瓜德賴爾 | 限制 | 限制類型 | 說明 |
|---|---|---|---|
| 查詢併發 | 4 | 硬 | 為確保通過報告API(包括增強資料模型的查詢，如Real-Time CDP資料模型)對聚合資料的查詢具有有效執行的資源，報告API通過為每個查詢分配併發時隙來跟蹤資源利用率。 系統將查詢放入隊列並等待併發插槽可用或可以從快取中提供它們。 在任何給定時間，最多可提供四個併發查詢槽。<br>如果您通過BI工具訪問報告API，並且需要更多併發，則需要BI伺服器。 |

{style="table-layout:auto"}

## 後續步驟

閱讀此文檔後，您應更好地瞭解可用查詢模式對查詢執行的預設限制。

有關查詢服務的詳細資訊，請參閱以下文檔：

* [查詢服務API](./api/getting-started.md)
* [查詢服務UI](./ui/overview.md)

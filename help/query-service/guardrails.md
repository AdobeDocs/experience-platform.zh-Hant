---
keywords: Experience Platform；查詢；查詢服務；疑難排解；護欄；准則；限制；
title: 查詢服務的護欄
description: 本文檔提供有關查詢服務資料使用限制的資訊，以幫助您優化查詢使用。
exl-id: 1ad5dcf4-d048-49ff-97e3-07040392b65b
source-git-commit: 8e5df8b3e38197520c6e15f7c6639c62527c086e
workflow-type: tm+mt
source-wordcount: '764'
ht-degree: 3%

---

# 查詢服務的護欄

護欄是提供資料和系統使用、效能最佳化以及避免錯誤或意外結果在Adobe Experience Platform中的指引的閾值。

本文檔提供查詢服務資料的預設使用限制，以幫助您在查詢與授權權限相關的資料時優化系統效能。

## 先決條件

在繼續閱讀本檔案之前，您應已妥善了解以下說明的兩個重要查詢服務功能：

* **臨機查詢**:用於執行 `SELECT` 查詢，以探索、實驗和驗證查詢結果所在的資料 **未儲存** 資料湖。

* **批次查詢**:用於執行 `INSERT TABLE AS SELECT` 和 `CREATE TABLE AS SELECT` 清除、塑造、操控和擴充資料的查詢。 這些查詢的結果 **儲存** 資料湖。 用於測量此功能耗用量的量度是計算小時數。

下圖概括了Query Service功能當前的打包和許可方式：

![說明與授權相關的Query Service功能的分發和封裝的圖表。](./images/guardrails/query-capabilities.png)

## 限制類型

本文檔中有兩種預設限制類型：

* **軟限制**:您可以超出軟限制，但軟限制可提供建議的系統效能准則。

* **硬限制**:硬限制提供絕對最大值。

>[!NOTE]
>
>本檔案中概述的預設限制不斷改善。 請定期回來查看更新。

## 主實體效能護欄

下表提供使用特定查詢模式時用於查詢執行的建議護欄限制和說明。

**臨機查詢**

| **瓜德拉伊** | **限制** | **限制類型** | **說明** |
|---|---|---|---|
| 最大執行時間 | 10 分鐘 | 硬 | 這定義了臨機SQL查詢的最大輸出時間。 超過傳回結果的時間限制會擲回錯誤代碼53400。 |
| 查詢併發 | <ul><li>如應用程式產品說明中所指定。</li><li>+1（每購買一個額外的臨機查詢使用者附加SKU套件）</li></ul> | 硬 | 這會定義可為特定組織同時執行的查詢數。 如果超出併發限制，則將排入隊列。 |
| 客戶端連接器和結果輸出限制 | 用戶端連接器<ul><li>查詢UI（100列）</li><li>第三方客戶端(50,000)</li><li>[!DNL PostgresSQL] 客戶端(50,000)</li></ul> | 硬 | 查詢結果可通過以下方式接收：<ul><li>查詢服務UI</li><li>第三方用戶端</li><li>[!DNL PostgresSQL] 客戶</li></ul>注意：對輸出計數加上限制可能會更快傳回結果。 例如， `LIMIT 5`, `LIMIT 10`等。 |
| 透過 | 用戶端UI | 不適用 | 這會定義如何讓使用者取得結果。 |

{style=&quot;table-layout:auto&quot;}

**批次查詢**

| **瓜德拉伊** | **限制** | **限制類型** | **說明** |
|---|---|---|---|
| 最大執行時間 | 24 小時 | 硬 | 這定義了批處理SQL查詢的最大執行時間。<br>查詢的處理時間取決於要處理的資料量和查詢複雜度。 |
| 用戶併發 | 無用戶限制 | 不適用 | 排程批次查詢為非同步作業，因此沒有使用者限制。 |
| 批處理資料的計算小時數 | 如客戶的Adobe Experience Platform Intelligence Query Custom SKU銷售訂單中所指定 | 軟 | 這定義了允許客戶執行批次查詢以掃描、處理和將資料寫回資料湖的計算時間範圍。 |
| 查詢併發 | 支援 | 不適用 | 排程的批次查詢為非同步作業，因此支援同時查詢。 |
| 客戶端連接器和結果輸出限制 | 用戶端連接器<ul><li>查詢UI（沒有列上限）</li><li>第三方用戶端（無列上限）</li><li>[!DNL PostgresSQL] 用戶端（沒有列上限）</li><li>REST API（無列上限）</li></ul> | 硬 | 查詢的結果可使用下列方法：<ul><li>可儲存為衍生資料集</li><li>可插入現有的衍生資料集</li></ul>注意：查詢結果中的記錄計數編號沒有上限。 |
| 透過 | 資料集 | 不適用 | 這會定義如何讓使用者取得結果。 |

{style=&quot;table-layout:auto&quot;}

為確保Real-time Customer Data Platform深入分析控制面板的每個查詢都有足夠的資源來有效執行，API會為每個查詢指派併發槽來追蹤資源使用情形。 該系統最多可處理四個併發查詢，因此，在任何給定時間都有四個併發查詢槽可用。 根據併發槽將查詢放入隊列，然後在隊列中等待，直到有足夠的併發槽可用。

## 後續步驟

閱讀本檔案後，您應更清楚了解可用查詢模式的查詢執行預設限制。

如需Query Service的詳細資訊，請參閱下列檔案：

* [查詢服務API](./api/getting-started.md)
* [查詢服務UI](./ui/overview.md)

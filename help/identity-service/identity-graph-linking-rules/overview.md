---
title: 身分圖表連結規則概觀
description: 瞭解Identity Service中的身分圖表連結規則。
hide: true
hidefromtoc: true
badge: Alpha
exl-id: 317df52a-d3ae-4c21-bcac-802dceed4e53
source-git-commit: f21b5519440f7ffd272361954c9e32ccca2ec2bc
workflow-type: tm+mt
source-wordcount: '1022'
ht-degree: 0%

---

# 身分圖表連結規則概觀

>[!IMPORTANT]
>
>身分圖表連結規則目前Alpha。 功能和檔案可能會有所變更。

## 目錄

* [概觀](./overview.md)
* [身分最佳化演演算法](./identity-optimization-algorithm.md)
* [範例情境](./example-scenarios.md)

透過Adobe Experience Platform Identity Service和即時客戶設定檔，很容易假設您的資料已完全內嵌，而且所有合併的設定檔透過個人識別碼（例如CRM ID）代表單一個人。 但是，在某些情況下，某些資料可能會嘗試將多個不同的設定檔合併為單一設定檔（「設定檔摺疊」）。 為避免這些不想要的合併，您可以使用透過身分圖表連結規則提供的設定，並允許使用者進行精確的個人化。

## 可能發生設定檔摺疊的範例情境

* **共用裝置**：共用裝置是指由超過一個使用者使用的裝置。 舉例來說，共用裝置包含平板電腦、圖書館電腦和資訊站。
* **錯誤的電子郵件和電話號碼**：錯誤的電子郵件和電話號碼是指註冊無效聯絡資訊的一般使用者，例如「測試」<span>@test.com」代表電子郵件，「+1-111-111-1111」代表電話號碼。
* **錯誤或錯誤的身分值**：錯誤或錯誤的身分值是指可能會合併CRM ID的非唯一身分值。 例如，雖然IDFA必須有36個字元（32個英數字元和4個連字型大小），但在某些情況下，識別值為「user_null」的IDFA可能會被擷取。 同樣地，電話號碼僅支援數字字元，但可能會內嵌身分值為「未指定」的電話名稱空間。

如需身分圖表連結規則使用案例的詳細資訊，請閱讀以下檔案： [範例情境](./example-scenarios.md).

## 身分圖表連結規則目標

使用身分圖表連結規則，您可以：

* 透過設定唯一的名稱空間（限制），為每個使用者建立單一身分圖表/合併的設定檔，以防止兩個不同的個人識別碼合併到一個身分圖表中。
* 透過設定優先順序來關聯線上、已驗證的事件與人員

### 限制

唯一的名稱空間是代表個人的識別碼，例如CRM ID、登入ID和雜湊電子郵件。 如果名稱空間指定為唯一，則圖表只能有一個與該名稱空間相同的身分(`limit=1`)。 這可以防止將兩個不同的人員識別碼合併到同一個圖表中。

* 如果未設定限制，則可能會導致不想要的圖表合併，例如圖表中有兩個具有CRM ID名稱空間的身分。
* 如果未設定限制，只要圖表在護欄內（50個身分/圖表），圖表就可以視需要新增任意數量的名稱空間。
* 如果已設定限制，則身分最佳化演演算法會確保該限制已強制執行。

### 身分最佳化演演算法

身分最佳化演演算法是確保強制執行限制的規則。 演演算法會遵循最近的連結並移除最舊的連結，以確保指定的圖表保持在您已定義的限制內。

以下是演演算法將匿名事件與已知識別碼建立關聯的影響清單：

* 如果符合下列條件，ECID將會與上次驗證的使用者相關聯：
   * 若CRM ID是由ECID （共用裝置）合併。
   * 如果限制僅設定為一個CRM ID。

如需詳細資訊，請閱讀以下檔案： [身分最佳化演演算法](./identity-optimization-algorithm.md).

### 優先等級

>[!IMPORTANT]
>
>目前不提供Alpha的名稱空間優先順序。

您可以使用名稱空間優先順序來定義哪些名稱空間比其他名稱空間更重要。 接著您為名稱空間設定的優先順序會用於定義主要身分，此身分會將設定檔片段（屬性和事件資料）儲存在即時客戶設定檔中。 如果已設定優先順序設定，則Web SDK上的主要身分設定將不再用來決定要儲存哪些設定檔片段。

* 限制和優先順序是獨立的設定，可以 **非** 互相影響：
   * 限制是Identity Service中的身分圖表設定。
   * 優先順序是即時客戶個人檔案上的個人檔案片段設定。
   * 優先順序會 **非** 影響身分圖表系統護欄。
* **名稱空間優先順序是數值** 指派給名稱空間以指出其相對重要性。 這是名稱空間的屬性。
* **主要身分是儲存設定檔片段所針對的身分**. 設定檔片段是儲存特定使用者相關資訊的資料記錄：屬性（通常透過CRM記錄擷取）或事件（通常從體驗事件或線上資料擷取）。
* 名稱空間優先順序會決定體驗事件的主要身分。
   * 對於設定檔記錄，您可以使用Experience PlatformUI中的結構描述工作區來定義身分欄位，包括主要身分。 閱讀指南： [在UI中定義身分欄位](../../xdm/ui/fields/identity.md) 以取得詳細資訊。

>[!BEGINSHADEBOX]

**名稱空間優先順序範例**

假設您已為名稱空間設定下列優先順序：

1. CRM ID：代表使用者。
2. IDFA：代表Apple硬體裝置，例如iPhone和iPad。
3. GAID：代表Google硬體裝置，例如Google Pixel。
4. ECID：代表網頁瀏覽器，例如Firefox、Safari和Chrome。
5. AAID：代表網頁瀏覽器。
如果同時傳送ECID和AAID，則兩個身分都代表相同的網頁瀏覽器（重複）。

如果將下列體驗事件擷取至Experience Platform，則會針對較高優先順序的名稱空間儲存設定檔片段。

**已驗證的事件：**

* 如果身分對應包含ECID、GAID和CRM ID，則事件資訊將會根據CRM ID （主要身分）進行儲存。
   * GAID代表Google硬體裝置(例如Google Pixel)、ECID代表網頁瀏覽器(例如Google Chrome)，而CRM ID代表已驗證的使用者。
   * 如果身分對應包含CRM ID、ECID和AAID，事件資訊將會根據CRM ID （主要身分）進行儲存。

**未驗證的事件：**

* 如果身分對應包含ECID、IDFA和AAID，則事件資訊將會根據IDFA （主要身分）進行儲存。
   * IDFA代表Apple硬體裝置(例如iPhone)，ECID和AAID都代表網頁瀏覽器(Safari)。

>[!ENDSHADEBOX]

## 後續步驟

如需身分圖表連結規則的詳細資訊，請參閱下列檔案：

* [身分最佳化演演算法](./identity-optimization-algorithm.md)
* [設定身分圖表連結規則的範例案例](./example-scenarios.md)

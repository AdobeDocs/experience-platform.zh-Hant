---
keywords: Experience Platform；首頁；熱門主題；結構；結構；列舉；主要身分；主要身分；XDM個人設定檔；體驗事件；XDM體驗事件；XDM ExperienceEvent；experienceevent；XDM Experienceevent；結構描述設計；最佳實務
solution: Experience Platform
title: 資料模型化的最佳實務
description: 本檔案介紹Experience Data Model (XDM)結構描述，以及構成要在Adobe Experience Platform中使用的結構描述的建置組塊、原則和最佳實務。
exl-id: 2455a04e-d589-49b2-a3cb-abb5c0b4e42f
source-git-commit: 55f86fdd4fd36d21dcbd575d6da83df18abb631d
workflow-type: tm+mt
source-wordcount: '2709'
ht-degree: 1%

---

# 資料模式的最佳做法

[!DNL Experience Data Model] (XDM)是核心架構，可標準化客戶體驗資料，提供用於下游Adobe Experience Platform服務的通用結構和定義。 只要遵守XDM標準，所有客戶體驗資料都可併入通用表示法中，好讓您從客戶動作中獲得有價值的深入分析、定義客戶對象，以及針對個人化目的表達客戶屬性。

由於XDM極為通用且可供設計自訂，因此在設計結構描述時，請務必遵循資料模型化的最佳實務。 本檔案說明將客戶體驗資料對應至XDM時，必須做出的重要決定和考量事項。

## 快速入門

閱讀本指南前，請先檢閱 [XDM系統總覽](../home.md) 以取得XDM及其在Experience Platform中角色的高層級簡介。

此外，本指南僅著重於有關結構描述設計的重要考量。 因此，強烈建議您參閱 [結構描述組合基本概念](./composition.md) 以取得本指南中提及之個別結構描述元素的詳細解釋。

## 最佳實務摘要

設計資料模型以用於Experience Platform的建議方法可概述如下：

1. 瞭解您資料的業務使用案例。
1. 識別應帶入的主要資料來源 [!DNL Platform] 以解決這些使用案例。
1. 識別可能也會有興趣的任何次要資料來源。 例如，如果貴組織中目前只有一個業務單位有興趣將其資料移植到 [!DNL Platform]，類似的業務單位日後可能也會對移植類似的資料感興趣。 考慮這些次要來源，有助於將整個組織的資料模型標準化。
1. 為已識別的資料來源建立高階實體關係圖(ERD)。
1. 將高階ERD轉換為 [!DNL Platform] — 中心ERD （包括設定檔、體驗事件和查詢實體）。

與識別執行業務使用案例所需的適用資料來源相關的步驟因組織而異。 雖然本檔案的其餘章節著重在識別資料來源後組織和建立ERD的後續步驟，但圖表各元件的說明可能會告知您應移轉至哪個資料來源的決定 [!DNL Platform].

## 建立高階ERD

確定您要帶入的資料來源後 [!DNL Platform]，建立高階ERD來協助引導將資料對應至XDM結構描述的流程。

以下範例代表想要將資料帶入的公司的簡化ERD [!DNL Platform]. 圖表會強調應分類為XDM類別的基本實體，包括客戶帳戶、飯店、地址和幾個常見的電子商務事件。

![](../images/best-practices/erd.png)

## 將實體排序為設定檔、查閱和事件類別

建立ERD以識別您要帶入的必要實體後 [!DNL Platform]，這些實體必須分類為設定檔、查詢和事件類別：

| 類別 | 說明 |
| --- | --- |
| 設定檔實體 | 個人資料實體代表與個人（通常是客戶）相關的屬性。 屬於此類別的實體應由架構表示，架構應根據 **[!DNL XDM Individual Profile]類別**. |
| 查詢實體 | 查閱實體代表可能與個人相關的概念，但無法直接用來識別個人。 屬於此類別的實體應由架構表示，架構應根據 **自訂類別**、和透過連結至設定檔和事件 [結構描述關係](../tutorials/relationship-ui.md). |
| 事件實體 | 事件實體代表與客戶可採取的動作、系統事件或您可能想要追蹤隨時間變更的任何其他概念相關的概念。 屬於此類別的實體應由架構表示，架構應根據 **[!DNL XDM ExperienceEvent]類別**. |

{style="table-layout:auto"}

### 實體排序的考量事項

以下各節提供如何將實體分類為上述類別的進一步指引。

#### 可變和不可變資料

實體類別之間排序的主要方式是擷取的資料是否可變。

屬於設定檔或查閱實體的屬性通常可變。 例如，客戶的偏好可能會隨著時間而改變，而訂閱計畫的引數可以根據市場趨勢進行更新。

相較之下，事件資料通常不可變動。 由於事件會附加至特定時間戳記，因此事件提供的「系統快照」不會變更。 例如，事件可在客戶結帳購物車時擷取其偏好設定，即使客戶的偏好設定日後有所變更，也不會變更。 事件資料記錄後即無法變更。

總而言之，設定檔和查詢實體包含可變屬性，並代表其擷取之主題的最新資訊，而事件則是系統特定時間不可變的記錄。

#### 客戶屬性

如果實體包含與個別客戶相關的任何屬性，則很可能是設定檔實體。 客戶屬性的範例包括：

* 姓名、出生日期、性別和帳戶ID等個人細節。
* 位置資訊，例如地址和GPS資訊。
* 聯絡資訊，例如，電話號碼和電子郵件地址。

#### 追蹤一段時間的資料

如果您想要分析實體內的特定屬性如何隨著時間改變，則很可能是事件實體。 例如，將產品專案新增至購物車時，可以在以下專案中以購物車新增事件形式進行追蹤： [!DNL Platform]：

| Customer ID | 類型 | 產品 ID | 數量 | 時間戳記 |
| --- | --- | --- | --- | --- |
| 1234567 | 新增 | 275098 | 2 | 10月1日，上午10:32 |
| 1234567 | 移除 | 275098 | 1 | 10月1日，上午10:33 |
| 1234567 | 新增 | 486502 | 1 | 10月1日，上午10:41 |
| 1234567 | 新增 | 910482 | 5 | 10月3日，下午2:15 |

{style="table-layout:auto"}

#### 區段使用案例

將實體分類時，請務必考慮您可能想要建立的對象，以處理您的特定業務使用案例。

例如，一家公司想要瞭解其忠誠度計畫的所有「金級」或「白金」會員，他們去年購買超過五次。 根據此分段邏輯，可以得出以下有關如何表示相關實體的結論：

* 「金級」和「白金」代表適用於個別客戶的忠誠度狀態。 由於細分邏輯僅與客戶目前的忠誠度狀態有關，此資料可模組化為設定檔結構描述的一部分。 如果您想要追蹤忠誠度狀態在一段時間內的變更，也可以建立其他事件結構描述來表示忠誠度狀態變更。
* 購買是指發生於特定時間的事件，而細分邏輯會關注指定時間範圍內的購買事件。 因此，此資料應模型化為事件結構描述。

#### 啟用使用案例

除了有關細分使用案例的考量事項外，您也應該檢閱這些對象的啟動使用案例，以識別其他相關屬性。

例如，一家公司已根據以下規則建立受眾： `country = US`. 然後，當將該對象啟用至某些下游目標時，公司想要根據首頁狀態篩選所有匯出的設定檔。 因此，a `state` 屬性也應在適用的設定檔實體中擷取。

#### 彙總值

根據使用案例和資料的詳細程度，您應決定是否需要預先彙總某些值，才能將其納入設定檔或事件實體。

例如，一家公司想要根據購物車購買次數來建立受眾。 您可以選擇以最低的詳細程度合併此資料，方法是將每個時間戳記購買事件納入為其本身的實體。 但是，這有時可能會以指數方式增加記錄的事件數量。 若要減少擷取的事件數，您可以選擇建立彙總值 `numberOfPurchases` 為期一週或一個月的期間。 其他彙總函式(例如MIN和MAX)也可以套用至這些情況。

>[!CAUTION]
>
>Experience Platform目前不會執行自動值聚總，不過此動作預計會在未來發行中執行。 如果您選擇使用彙總值，則必須先從外部執行計算，然後再將資料傳送至 [!DNL Platform].

#### 基數

在ERD中建立的基數也可提供一些有關如何將實體分類的線索。 如果兩個實體之間有一對多關係，則代表「許多」的實體很可能是一個事件實體。 不過，在某些情況下，「許多」也是一組查閱實體，這些實體會以陣列形式提供在設定檔實體中。

>[!NOTE]
>
>由於沒有適用於所有使用案例的通用方法，因此根據基數分類實體時，務必要考慮每種情況的利弊。 請參閱 [下一節](#pros-and-cons) 以取得詳細資訊。

下表概述一些常見的實體關係，以及可從這些關係衍生的類別：

| 關係 | 基數 | 實體類別 |
| --- | --- | --- |
| 客戶與購物車結帳 | 一對多 | 單一客戶可能會有許多購物車結帳，這些是可隨著時間追蹤的事件。 因此，客戶將成為設定檔實體，而購物車結帳將成為事件實體。 |
| 客戶和忠誠度帳戶 | 一對一 | 單一客戶只能有一個忠誠度帳戶，反之亦然。 由於關係是一對一的關係，客戶和忠誠度帳戶都會代表設定檔實體。 |
| 客戶與訂閱 | 一對多 | 單一客戶可能有許多訂閱。 由於公司只關心客戶的目前訂閱，因此客戶是設定檔實體，而訂閱是查詢實體。 |

{style="table-layout:auto"}

### 不同實體類別的優劣 {#pros-and-cons}

雖然上一節提供了一些決定如何將實體分類的一般准則，但請務必瞭解選擇一個實體類別通常有利有弊。 以下案例研究旨在說明您如何在這些情況下考慮選項。

公司會追蹤其客戶的作用中訂閱，其中一位客戶可以有許多訂閱。 該公司也想要納入細分使用案例的訂閱，例如尋找具有有效訂閱的所有使用者。

在此案例中，公司有兩個潛在選項，可用於在其資料模型中表示客戶的訂閱：

1. [使用設定檔屬性](#profile-approach)
1. [使用事件實體](#event-approach)

#### 方法1：使用設定檔屬性 {#profile-approach}

第一種方式是加入一系列訂閱，作為客戶設定檔實體中的屬性。 此陣列中的物件將包含 `category`， `status`， `planName`， `startDate`、和 `endDate`.

<img src="../images/best-practices/profile-schema.png" width="800"><br>

**優點**

* 區段適用於預期的使用案例。
* 結構描述只會為客戶保留最新的訂閱記錄。

**缺點**

* 每當陣列中的任何欄位發生變更時，都必須重述整個陣列。
* 如果不同的資料來源或業務單位正在將資料饋送至陣列，則要在所有通道上同步最新更新的陣列將變得困難重重。

#### 方法2：使用事件實體 {#event-approach}

第二種方式是使用事件結構描述來代表訂閱。 這需要擷取和第一個方法相同的訂閱欄位，以及訂閱ID、客戶ID和訂閱事件發生的時間戳記。

<img src="../images/best-practices/event-schema.png" width="800"><br>

**優點**

* 區段規則可以更靈活（例如尋找過去30天內變更訂閱的所有客戶）。
* 客戶的訂閱狀態變更時，您不必再更新客戶設定檔屬性中冗長且可能複雜的陣列。 如果同時變更客戶的訂閱清單是從多個來源發生，這會特別有用。

**缺點**

* 對原始預期使用案例（識別客戶最近訂閱的狀態）而言，細分會變得更加複雜。 對象現在需要額外的邏輯來標幟客戶的最後一個訂閱事件，以檢查其狀態。
* 事件會自動到期並從設定檔存放區中清除的風險較高。 請參閱指南： [體驗事件有效期](../../profile/event-expirations.md) 以取得詳細資訊。

## 根據已分類的實體建立結構描述

將實體排序為設定檔、查閱和事件類別後，您就可以開始將資料模型轉換為XDM結構描述。 為了示範，先前顯示的範例資料模型已分類為下圖中的適當類別：

<img src="../images/best-practices/erd-sorted.png" width="800"><br>

實體已排序的類別應決定其結構描述所依據的XDM類別。 再次重申：

* 設定檔實體應使用 [!DNL XDM Individual Profile] 類別。
* 事件實體應使用 [!DNL XDM ExperienceEvent] 類別。
* 查閱實體應使用您的組織定義的自訂XDM類別。 然後，設定檔和事件實體可以透過結構描述關係參照這些查詢實體。

>[!NOTE]
>
>雖然事件實體幾乎永遠都會以不同的結構描述表示，但設定檔或查詢類別中的實體可能會根據其基數在一個XDM結構描述中組合在一起。
>
>例如，由於Customers實體與LoyaltyAccounts實體具有一對一的關係，Customers實體的結構描述也可包含 `LoyaltyAccount` 物件，包含每個客戶的適當忠誠度欄位。 但是，如果關係是一對多的，則代表「多」的實體可能由單獨的結構描述或設定檔屬性陣列表示，具體取決於其複雜性。

以下各節提供根據您的ERD建構方案的一般指引。

### 採用迭代式模型方法

此 [結構描述演化規則](./composition.md#evolution) 指定在方案實作後，只能對方案進行非破壞性變更。 換言之，一旦您將欄位新增到結構描述且已根據該欄位擷取資料，就無法再移除該欄位。 因此，當您首次建立方案時，務必要採用反複的模型方法，從隨著時間逐漸增加複雜性的簡化實作開始。

如果您不確定特定欄位是否必須包含在結構描述中，最佳實務是將其排除在外。 如果之後確定該欄位是必要的，可隨時將其新增到結構描述的下一個反複專案中。

### 身分欄位

在Experience Platform中，標籤為身分的XDM欄位用於拼接來自多個資料來源的個別客戶的相關資訊。 雖然結構描述可以有多個標示為身分的欄位，但必須定義單一主要身分，才能讓結構描述能夠用於 [!DNL Real-Time Customer Profile]. 請參閱以下小節： [身分欄位](./composition.md#identity) 架構組合基本概念中，以取得這些欄位使用案例的詳細資訊。

在設計結構描述時，關聯式資料庫表格中的任何主索引鍵都可能是主要身分的候選者。 適用身分欄位的其他範例包括客戶電子郵件地址、電話號碼、帳戶ID和 [ECID](../../identity-service/ecid.md).

### Adobe應用程式結構描述欄位群組

Experience Platform提供幾個現成的XDM結構描述欄位群組，用於擷取與以下Adobe應用程式相關的資料：

* Adobe Analytics
* Adobe Audience Manager
* Adobe Campaign
* Adobe Target

例如， [[!UICONTROL Adobe Analytics ExperienceEvent范] 欄位群組](https://github.com/adobe/xdm/blob/master/extensions/adobe/experience/analytics/experienceevent-all.schema.json) 可讓您對應 [!DNL Analytics] — 您的XDM結構描述的特定欄位。 根據您所使用的Adobe應用程式，您應在結構中使用這些Adobe提供的欄位群組。

<img src="../images/best-practices/analytics-field-group.png" width="700"><br>

Adobe應用程式欄位群組會透過使用 `identityMap` 欄位，這是系統產生的唯讀物件，可對應個別客戶的標準身分值。

對於Adobe Analytics，ECID是預設的主要身分。 如果客戶未提供ECID值，則主要身分將預設為AAID。

>[!IMPORTANT]
>
>使用Adobe應用程式欄位群組時，不應將其他欄位標示為主要身分。 如果有其他屬性需要標籤為身分，則需要將這些欄位指派為次要身分。

## 後續步驟

本檔案說明為Experience Platform設計資料模型的一般准則和最佳實務。 總結：

* 在建構方案之前，使用由上而下的方法，將資料表格排序為設定檔、查閱和事件類別。
* 在設計針對不同目的的結構時，通常有多種方法和選項。
* 您的資料模型應可支援您的業務使用案例，例如細分或客戶歷程分析。
* 儘可能簡化您的結構描述，只在絕對必要時新增欄位。

在您準備好後，請參閱上的教學課程 [在UI中建立結構描述](../tutorials/create-schema-ui.md) 如需如何建立結構描述的逐步指示，請為實體指派適當的類別，並新增欄位以將資料對應至。

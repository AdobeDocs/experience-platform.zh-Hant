---
title: Adobe管理主機概述
description: 了解在Adobe Experience Platform中部署標籤程式庫組建時的預設托管選項。
source-git-commit: 39d9468e5d512c75c9d540fa5d2bcba4967e2881
workflow-type: tm+mt
source-wordcount: '1173'
ht-degree: 61%

---

# Adobe 管理主機概述

>[!NOTE]
>
>Adobe Experience Platform Launch已重新命名為Experience Platform中的資料收集技術套件。 因此，產品檔案中已推出數個術語變更。 有關術語更改的綜合參考，請參閱以下[document](../../../term-updates.md)。

Adobe管理主機是在Adobe Experience Platform中部署標籤程式庫組建時的預設主機設定。 透過資料收集使用者介面建立新屬性時，系統會為您建立預設的Adobe管理主機。

藉由 Adobe 管理主機，程式庫組建會傳送至 Adobe 簽約合作的第三方內容傳遞網路 (CDN)。這些 CDN 在 Adobe 服務之外獨立運作，因此即使 Platform 處於維護狀態或停止運作，您部署的程式碼仍可在您的網站和應用程式中正常運作。Adobe 管理主機的內嵌程式碼會參照 CDN 上的主程式庫檔案，讓用戶端裝置可在執行階段擷取檔案。

本檔案概述Platform中的Adobe管理主機，並提供在UI中建立新Adobe管理主機的步驟。

## Akamai

目前，Adobe 的主要 CDN 服務提供商為 [Akamai](https://www.akamai.com/tw/zh)。Akamai 健全的 CDN 可為全球大量的網頁訪客提供內容。CDN 會維持負載平衡、地理位置最佳化節點的備援網路正常運作，以便盡快為遍布全球的訪客提供內容。

具體來說，Akamai 在 87 個國家/地區超過 1,150 個網路上執行超過 137,000 部伺服器。在備援方面，CDN不僅可從一台伺服器路由至另一台伺服器，還可視需要從一台伺服器節點路由至另一台伺服器節點。 換言之，每個節點都包含多部伺服器，因此其中一部伺服器停止運作不會造成問題，同一個節點上的其他伺服器可直接遞補。

如果整個節點關閉，Akamai會從具有相同快取內容的最近節點提供內容。 系統會根據訪客位置、流量負載和其他因素動態選取節點，從最適當的本機節點，為每個訪客穩定地提供內容。

由 Akamai 託管的檔案主要是使用 `assets.adobedtm.com` 網域。網域參照安全與否 (`http://` 或 `https://`) 取決於內嵌 `<script>` 程式碼中呼叫網域的方式。

>[!WARNING]
>
>如果您的程式庫無法透過 Akamai 網路存取，則 Platform 無法防止因此而產生的任何錯誤。

## 程式庫組建快取

使用 Adobe 管理主機時，您的程式庫組建會在兩個位置進行快取：

* [邊緣快取](#edge)
* [瀏覽器快取](#browser)

### 邊緣快取 {#edge}

CDN的主要用途是以智慧化方式將內容傳送至地理位置上較接近使用者的伺服器，讓用戶端裝置可更快速擷取內容。 在 CDN 的協助下，內容副本得以傳送至全球各地的伺服器 (即「邊緣節點」)，進而達到迅速提供內容的目的。

您的組建部署至 Adobe 管理主機後，CDN 會在數個集中式伺服器 (即「原始伺服器」) 上散發組建，由其將組建副本傳送至全球各地的邊緣節點，以利快取。最後，儲存在這些邊緣節點上的組建快取版本就能提供給用戶端裝置。

![](../images/cdn-diagram.png)

>[!NOTE]
>
>使用 Adobe 管理主機時，程式庫首次發佈至任何新環境最多需要 5 分鐘，才能傳播至全域 CDN。

邊緣節點收到特定檔案（例如您的程式庫組建）的請求時，會先檢查檔案的存留時間(TTL)值。 如果 TTL 尚未過期，邊緣節點就會提供快取版本。如果 TTL 已過期，邊緣節點會向最近的來源提出新副本請求，接著向使用者提供最新的副本，並使用新的 TTL 快取最新副本。

>[!NOTE]
>
>除了邊緣節點快取以外，可能還會有中介網路 (例如公司或行動網路) 自行執行快取作業。如果您組建的快取成效不如預期，這些網路可能是根本原因。

#### 邊緣快取失效 {#invalidation}

上傳新程式庫組建時，所有邊緣節點上的快取都會失效。 這表示無論擷取最新副本的時間有多近，每個節點都會將其快取版本視為無效。 下次邊緣節點收到該檔案的索取請求時，就會從原始伺服器擷取最新副本。

由於Akamai有多個原始伺服器，且會彼此複製檔案，加上無法得知哪個原始伺服器會先收到您的檔案，因此這些節點要求可能會送到沒有最新版本的原始伺服器。 接著會再次快取較舊的版本。 為避免發生此情況，會依下列時間間隔對每個新組建執行多次快取無效判定：

* 上傳後立即執行
* 上傳後 5 分鐘
* 上傳後 60 分鐘

藉由這種快取失效機制，原始伺服器群組能有時間相互複製檔案的最新版本，如此一來，節點擷取檔案時，每個原始伺服器就能提供最新版本。

### 瀏覽器快取 {#browser}

使用 `cache-control` HTTP 標頭也可便於在瀏覽器上快取程式庫組建。使用 Adobe 管理主機時，您無法控制 API 回應中傳回的標頭，因此系統會使用 Adobe 的快取預設值。換言之，您無法針對 Adobe 管理主機使用自訂標頭。如果需要自訂 `cache-control` 標頭，建議您改為[自行託管](self-hosting-libraries.md)。

瀏覽器快取型程式庫組建的存留時間(TTL)取決於`cache-control`標頭，根據您使用的標籤環境而有所不同：

| 環境 | `cache-control` 值 |
| --- | --- |
| 開發 | `max-age=0, no-cache, no-store` |
| 預備 | `max-age=0, no-cache, no-store` |
| 生產 | `max-age=3600` |

如上表所示，開發和測試環境均不支援瀏覽器快取。因此，請勿在高流量或生產環境中使用開發或測試用的內嵌程式碼。

快取控制標題只會套用至主要程式庫組建。 主程式庫之下的子資源一律視為全新資源，因此不需在瀏覽器上加以快取。

## 在資料收集UI中使用Adobe管理托管

當您在[資料收集UI](http://launch.adobe.com/)中首次建立屬性時，系統會自動為您建立Adobe管理主機。 預設情況下，所有具有立即可用屬性的可用環境也會指派給Adobe管理主機。

>[!NOTE]
>
>如果從所有環境取消指派預設的 Adobe 管理主機，則可刪除該主機。如果您想在執行此動作後切換回 Adobe 管理主機，可依下列步驟建立新主機:
>
>1. 在屬性上選擇&#x200B;**[!UICONTROL Hosts]**&#x200B;標籤，然後選擇&#x200B;**[!UICONTROL Add Host]**。
>1. 提供主機的名稱，選擇&#x200B;**[!UICONTROL 由Adobe管理]**&#x200B;作為主機類型，然後選擇&#x200B;**[!UICONTROL 保存]**。

>
>
接著，您就可以視需求將環境重新指派給 Adobe 管理主機。

## 後續步驟

本檔案概略介紹Adobe Experience Platform中標籤程式庫的Adobe管理托管作業。 如需其他託管服務的相關資訊，請參閱下列文件：

* [SFTP 託管](./sftp-host.md)
* [自行託管程式庫](./self-hosting-libraries.md)

若要深入了解如何針對您的環境需求管理主機，請參閱[環境指南](../environments.md)。

---
title: Adobe托管主機概述
description: 瞭解在Adobe Experience Platform部署標籤庫內部版本的預設托管選項。
exl-id: 9042c313-b0d3-4f6e-963d-0051d760fd16
source-git-commit: 85b428b3997d53cbf48e4f112e5c09c0f40f7ee1
workflow-type: tm+mt
source-wordcount: '1173'
ht-degree: 60%

---

# Adobe 管理主機概述

>[!NOTE]
>
>Adobe Experience Platform Launch已被改名為Adobe Experience Platform的一套資料收集技術。 因此，所有產品文件中出現了幾項術語變更。 如需術語變更的彙整參考資料，請參閱以下[文件](../../../term-updates.md)。

Adobe管理的主機是在Adobe Experience Platform部署標籤庫內部版本的預設主機設定。 通過「資料收集」用戶介面建立新屬性時，將為您建立預設的Adobe管理主機。

藉由 Adobe 管理主機，程式庫組建會傳送至 Adobe 簽約合作的第三方內容傳遞網路 (CDN)。這些 CDN 在 Adobe 服務之外獨立運作，因此即使 Platform 處於維護狀態或停止運作，您部署的程式碼仍可在您的網站和應用程式中正常運作。Adobe 管理主機的內嵌程式碼會參照 CDN 上的主程式庫檔案，讓用戶端裝置可在執行階段擷取檔案。

本文檔概述了平台中的Adobe管理主機，並提供了有關如何在UI中建立新的Adobe管理主機的步驟。

## Akamai

目前，Adobe 的主要 CDN 服務提供商為 [Akamai](https://www.akamai.com/tw/zh)。Akamai 健全的 CDN 可為全球大量的網頁訪客提供內容。CDN 會維持負載平衡、地理位置最佳化節點的備援網路正常運作，以便盡快為遍布全球的訪客提供內容。

具體來說，Akamai 在 87 個國家/地區超過 1,150 個網路上執行超過 137,000 部伺服器。在冗餘方面，CDN不僅可以從一個伺服器路由到另一個伺服器，還可以根據需要從一個伺服器節點路由到另一個伺服器節點。 換言之，每個節點都包含多部伺服器，因此其中一部伺服器停止運作不會造成問題，同一個節點上的其他伺服器可直接遞補。

如果整個節點出現故障，Akamai將從最近的節點使用相同的快取內容提供服務。 系統會根據訪客位置、流量負載和其他因素動態選取節點，從最適當的本機節點，為每個訪客穩定地提供內容。

由 Akamai 託管的檔案主要是使用 `assets.adobedtm.com` 網域。網域參照安全與否 (`http://` 或 `https://`) 取決於內嵌 `<script>` 程式碼中呼叫網域的方式。

>[!WARNING]
>
>如果您的程式庫無法透過 Akamai 網路存取，則 Platform 無法防止因此而產生的任何錯誤。

## 程式庫組建快取

使用 Adobe 管理主機時，您的程式庫組建會在兩個位置進行快取：

* [邊緣快取](#edge)
* [瀏覽器快取](#browser)

### 邊緣快取 {#edge}

CDN的主要目的是智慧地將內容分發到地理上更接近最終用戶的伺服器，以便客戶端設備能夠更快地檢索內容。 在 CDN 的協助下，內容副本得以傳送至全球各地的伺服器 (即「邊緣節點」)，進而達到迅速提供內容的目的。

您的組建部署至 Adobe 管理主機後，CDN 會在數個集中式伺服器 (即「原始伺服器」) 上散發組建，由其將組建副本傳送至全球各地的邊緣節點，以利快取。最後，儲存在這些邊緣節點上的組建快取版本就能提供給用戶端裝置。

![](../images/cdn-diagram.png)

>[!NOTE]
>
>使用 Adobe 管理主機時，程式庫首次發佈至任何新環境最多需要 5 分鐘，才能傳播至全域 CDN。

當邊緣節點收到對特定檔案（如庫構建）的請求時，該節點首先檢查檔案的過期時間。 如果時間未過期，則邊緣節點將提供快取版本。 如果時間已過，則邊緣節點會從最近的源請求新副本，為該刷新副本提供服務，然後使用新的過期時間快取該刷新副本。

>[!NOTE]
>
>除了邊緣節點快取以外，可能還會有中介網路 (例如公司或行動網路) 自行執行快取作業。如果您組建的快取成效不如預期，這些網路可能是根本原因。

#### 邊緣快取失效 {#invalidation}

上載新庫生成時，所有適用邊緣節點上的快取都無效。 這意味著每個節點都認為其快取版本無效，而不管它最近檢索到新副本的時間有多長。 下次邊緣節點收到該檔案的索取請求時，就會從原始伺服器擷取最新副本。

由於Akamai有多個源伺服器，這些伺服器可以彼此複製檔案，並且由於無法知道哪個源伺服器首先收到了您的檔案，因此這些節點請求可能會命中一個沒有最新版本的源伺服器。 然後，它將再次快取舊版本。 為防止出現這種情況，在以下時間間隔內對每個新生成執行多個快取無效：

* 上傳後立即執行
* 上傳後 5 分鐘
* 上傳後 60 分鐘

藉由這種快取失效機制，原始伺服器群組能有時間相互複製檔案的最新版本，如此一來，節點擷取檔案時，每個原始伺服器就能提供最新版本。

### 瀏覽器快取 {#browser}

使用 `cache-control` HTTP 標頭也可便於在瀏覽器上快取程式庫組建。使用 Adobe 管理主機時，您無法控制 API 回應中傳回的標頭，因此系統會使用 Adobe 的快取預設值。換言之，您無法針對 Adobe 管理主機使用自訂標頭。如果需要自訂 `cache-control` 標頭，建議您改為[自行託管](self-hosting-libraries.md)。

瀏覽器快取庫生成的過期時間(由 `cache-control` 標題)會因您使用的標籤環境而異：

| 環境 | `cache-control` 值 |
| --- | --- |
| 開發 | `max-age=0, no-cache, no-store` |
| 預備 | `max-age=0, no-cache, no-store` |
| 生產 | `max-age=3600` |

如上表所示，開發和測試環境均不支援瀏覽器快取。因此，請勿在高流量或生產環境中使用開發或測試用的內嵌程式碼。

快取控制標頭僅應用於主庫生成。 主程式庫之下的子資源一律視為全新資源，因此不需在瀏覽器上加以快取。

## 在 UI 中使用由 Adobe 管理的託管機制

首次在平台UI或資料收集UI中建立屬性時，將自動為您建立Adobe管理的主機。 預設情況下，所有具有立即可用屬性的可用環境也分配給Adobe管理的主機。

>[!NOTE]
>
>如果從所有環境取消指派預設的 Adobe 管理主機，則可刪除該主機。如果您想在執行此動作後切換回 Adobe 管理主機，可依下列步驟建立新主機:
>
>1. 選擇 **[!UICONTROL 主機]** 頁籤，然後選擇 **[!UICONTROL 添加主機]**。
>1. 提供主機名稱，選擇 **[!UICONTROL 按Adobe管理]** 作為主機類型，然後選擇 **[!UICONTROL 保存]**。

>
>接著，您就可以視需求將環境重新指派給 Adobe 管理主機。

## 後續步驟

本文檔概述了Adobe Experience Platform的標籤庫的Adobe管理托管。 如需其他託管服務的相關資訊，請參閱下列文件：

* [SFTP 託管](./sftp-host.md)
* [自行託管程式庫](./self-hosting-libraries.md)

若要深入了解如何針對您的環境需求管理主機，請參閱[環境指南](../environments.md)。

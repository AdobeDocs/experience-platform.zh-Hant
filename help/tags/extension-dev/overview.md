---
title: 擴充功能開發概述
description: 了解不同標籤擴充功能類型的主要元件，以及Adobe Experience Platform中的擴充功能開發程式。
source-git-commit: 39d9468e5d512c75c9d540fa5d2bcba4967e2881
workflow-type: tm+mt
source-wordcount: '1888'
ht-degree: 67%

---

# 擴充功能開發概述

>[!NOTE]
>
>Adobe Experience Platform Launch已重新命名為Experience Platform中的資料收集技術套件。 因此，產品檔案中已推出數個術語變更。 有關術語更改的綜合參考，請參閱以下[document](../term-updates.md)。

Adobe Experience Platform的主要目標之一，是建立開放的生態系統，讓核心工程團隊以外的工程師能透過標籤公開其他功能。 這可透過 Reactor 擴充功能來完成。當使用者將擴充功能安裝在標籤屬性上後，該擴充功能的功能便可供屬性的所有使用者使用。

本檔案概述不同擴充功能類型的主要元件，並提供進一步檔案的連結，以引導您進行擴充功能開發程式。

## 程式庫模組

程式庫模組是可重複使用的程式碼片段，由在標籤執行階段程式庫內發出的擴充功能提供。 根據您是開發 Web 擴充功能或邊緣擴充功能，可用的模組類型及其使用案例會有所不同。如需概略了解每種擴充功能類型的模組，請參閱下列各小節：

* [Web 擴充功能的模組](#web-modules)
* [邊緣擴充功能的模組](#edge-modules)

### Web 擴充功能的模組 {#web-modules}

在 Web 擴充功能中，規則會透過事件觸發，接著在符合特定條件時執行特定動作。如需詳細資訊，請參閱 [Web 擴充功能中的模組流程](./web/flow.md)概述文件。

除了 Adobe 提供的[核心模組](./web/core.md)之外，您也可以在 Web 擴充功能中定義下列程式庫模組類型。

* [事件類型](#web-event)
* [條件類型](#web-condition)
* [動作類型](#web-action)
* [資料元素類型](#web-data-element)
* [共用模組](#shared)

>[!NOTE]
>
>若要進一步了解在 Web 擴充功能中實作程式庫模組所需的格式，請參閱[模組格式概述](./web/format.md)。

#### 事件類型 {#web-event}

規則事件是指在引發規則之前必須發生的活動。

例如，擴充功能可提供「手勢」事件類型，來監視應發生的特定滑鼠或觸控手勢。一旦該手勢發生，事件邏輯就會引發規則。

事件類型通常包含(1)顯示於資料收集UI中的檢視，供使用者修改事件的設定，以及(2)在標籤執行階段程式庫內發出的程式庫模組，用以解譯設定並監視應發生的特定活動。

[更多詳情](./web/event-types.md)

#### 條件類型 {#web-condition}

在規則事件發生後，會評估規則條件。所有條件都必須傳回 true，才會繼續處理規則。使用者明確將條件放入「例外」貯體時則屬例外；在此情況下，貯體內的所有條件都必須傳回 false，才會繼續處理規則。

例如，擴充功能可提供「檢視區包含」條件類型，讓 使用者可在其中指定 CSS 選擇器。在用戶端的網站上評估條件時，擴充功能將可尋找符合 CSS 選擇器的元素，並傳回結果指出其中是否有任何元素包含在使用者的檢視區中。

條件類型通常包含(1)顯示於資料收集UI中的檢視，供使用者修改條件的設定，以及(2)在標籤執行階段程式庫內發出的程式庫模組，用以解譯設定及評估條件。

[更多詳情](./web/condition-types.md)

#### 動作類型 {#web-action}

規則動作是在規則事件發生，且條件通過評估後所執行的動作。

例如，擴充功能可提供「顯示支援聊天」動作類型，其中可顯示支援聊天對話方塊，協助可能在結帳時遇到問題的使用者。

動作類型通常包含(1)顯示於資料收集UI中的檢視，供使用者修改動作的設定，以及(2)在標籤執行階段程式庫內發出的程式庫模組，用以解譯設定及執行動作。

[更多詳情](./web/action-types.md)

#### 資料元素類型 {#web-data-element}

資料元素實質上是頁面上資料片段的別名，無論該資料位於查詢字串參數、Cookie、DOM 元素還是其他位置中。資料元素可供規則參照，並可作為據以存取這些資料片段的抽象概念。若資料的位置在未來有所變更 (例如，從 DOM 元素的 `innerHTML` 變更為 JavaScript 變數的值)，單一資料元素可重新設定，而所有參考該資料元素的規則可能維持不變。

資料元素類型可讓使用者設定資料元素，透過特定方式存取資料片段。例如，擴充功能可提供「本機儲存體項目」資料元素類型，讓 使用者可在其中指定本機儲存體項目名稱。當規則參考資料元素時，擴充功能將可利用使用者在設定資料元素時提供的本機儲存體項目名稱，來尋找本機儲存體項目值。

資料元素類型通常包含(1)顯示於資料收集UI中的檢視，供使用者修改資料元素的設定，以及(2)在標籤執行階段程式庫內發出的程式庫模組，用以解譯設定及擷取資料片段。

[更多詳情](./web/data-element-types.md)

#### 共用模組 {#shared}

共用模組是指要讓其他擴充功能存取的擴充功能所公開的模組。這對於擴充功能之間的通訊可能是很有用的機制。例如，A 擴充功能可以非同步方式載入資料，並透過 [Promise](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Promise) 讓該資料供 B 擴充功能使用。

共用模組即使未曾從其他擴充功能內部呼叫，也會包含在程式庫中。為了避免無謂增加程式庫大小，您對於要公開為共用模組的項目應謹慎處理。

共用模組沒有檢視元件。

[更多詳情](./web/shared.md)

### 邊緣擴充功能的模組 {#edge-modules}

邊緣擴充功能中，規則會透過條件檢查作業來觸發，接著在通過檢查後執行特定動作。如需詳細資訊，請參閱[邊緣擴充功能中的模組流程](./edge/flow.md)概述文件。

您可以在邊緣擴充功能中定義自己的程式庫模組。這些模組可歸類為下列類型：

* [條件類型](#condition)
* [動作類型](#action)
* [資料元素類型](#data-element)

>[!NOTE]
>
>若要進一步了解在邊緣擴充功能中實作程式庫模組所需的格式，請參閱[模組格式概述](./edge/format.md)。

#### 條件類型 {#condition}

在規則事件發生後，會評估規則條件。所有條件都必須傳回 true，才會繼續處理規則。使用者明確將條件放入「例外」貯體時則屬例外；在此情況下，貯體內的所有條件都必須傳回 false，才會繼續處理規則。

例如，擴充功能可提供「檢視區包含」條件類型，讓 使用者可在其中指定 CSS 選擇器。在用戶端的網站上評估條件時，擴充功能將可尋找符合 CSS 選擇器的元素，並傳回結果指出其中是否有任何元素包含在使用者的檢視區中。

條件類型通常包含(1)顯示於資料收集UI中的檢視，供使用者修改條件的設定，以及(2)在標籤執行階段程式庫內發出的程式庫模組，用以解譯設定及評估條件。

[更多詳情](./web/condition-types.md)

#### 動作類型 {#action}

規則動作是在規則條件通過評估後所執行的動作。

例如，擴充功能可提供「顯示支援聊天」動作類型，其中可顯示支援聊天對話方塊，協助可能在結帳時遇到問題的使用者。

動作類型通常包含(1)顯示於資料收集UI中的檢視，供使用者修改動作的設定，以及(2)在標籤執行階段程式庫內發出的程式庫模組，用以解譯設定及執行動作。

[更多詳情](./web/action-types.md)

#### 資料元素類型 {#data-element}

資料元素實質上是頁面上資料片段的別名，不論該資料位於伺服器所收到事件內的何處。資料元素可供規則參照，並可作為據以存取這些資料片段的抽象概念。若資料的位置日後有所變更 (例如含有值的事件索引鍵有所變動)，您可重新設定單一資料元素，而所有參照該資料元素的規則可以維持不變。

資料元素類型通常包含(1)顯示於資料收集UI中的檢視，供使用者修改資料元素的設定，以及(2)在標籤執行階段程式庫內發出的程式庫模組，用以解譯設定及擷取資料片段。

[更多詳情](./web/data-element-types.md)

## 擴充功能組態

擴充功能組態是指擴充功能據以向使用者收集全域設定的方式。例如，假設擴充功能允許使用者使用「傳送信標」動作來傳送信標，且信標一律須包含帳戶 ID。我們不想勞煩使用者在每次設定「傳送信標」動作時都須提供帳戶 ID。因此，擴充功能只會從擴充功能組態檢視中要求一次帳戶 ID。每當要傳送信標時，「傳送信標」動作程式庫模組都可從擴充功能組態中提取帳戶 ID，並將其新增至信標。

當使用者將擴充功能安裝至標籤屬性時，將會顯示擴充功能組態檢視。 使用者若未完成擴充功能組態，就無法完成擴充功能的安裝。

擴充功能組態包含檢視元件，此元件會匯出設定，然後這些設定會在標籤執行階段程式庫內發出，成為純物件。

[更多詳情](./configuration.md)

## 擴充功能結構

擴充功能由檔案目錄組成。這些檔案的建構方式概述如下。如需檔案內容的詳細資訊，請參閱其他小節。

[`extension.json`](./manifest.md) 檔案必須位於根目錄。此檔案的功用之一，是說明擴充功能的組成項目以及特定檔案在目錄中的位置。這與 [npm](https://www.npmjs.com/) 中的 [`package.json`](https://docs.npmjs.com/files/package.json) 檔案有某些共同之處。

每個程式庫模組（要在標籤執行階段程式庫內發出的邏輯）都必須是其專屬的檔案，且其內容必須遵循[CommonJS模組標準](http://wiki.commonjs.org/wiki/Modules/1.1.1)。 舉例來說，如果您正在建立「傳送信標」動作類型，就必須要有一個檔案內含傳送信標的邏輯。此檔案的內容將在標籤執行階段程式庫內發出。 而該檔案可稱為 `sendBeacon.js`。檔案在目錄中的位置並不重要，因為 `extension.json` 會說明其位置。

每個檢視都必須是HTML檔案，且必須能載入到標籤應用程式內的iframe中。 檢視必須包含標籤提供的指令碼，並符合小型API，才能與應用程式通訊。 您的檢視中並沒有可用程式庫的限制。換言之，您可以使用jQuery、Underscore、React、Angular、Bootstrap或其他程式庫。 不過，我們希望您的擴充功能可保有與應用程式類似的外觀和風格。

建議您將所有檢視相關檔案 (HTML、CSS、JavaScript) 放在與程式庫模組檔案不同的單一子目錄中。在 `extension.json` 中，您將說明此檢視子目錄的位置。然後，Platform會從其Web伺服器提供此子目錄（且僅限此子目錄）。
